const Discord = require('discord.js');
const fs = require('fs');
const client = new Discord.Client();
var prefix = "-";
var dat = JSON.parse("{}");



client.on('ready',  () => {
console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~');
console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~');
console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~Team sy bot~~~~~~~~~~~');
console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~');
console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~');
console.log(`Logged in as  * [ "  Team #Plus Bot " ] servers! [ " ${client.guilds.size} " ] Users! [ " ${client.users.size} " ]`); 

});

client.on('message', msg => {
  if (msg.content === '-Ø´ØºØ§Ù„ bc') {
    msg.reply('ÙŠØ¨ Ø§Ù†Ø§ Ø´ØºØ§Ù„');
  }
});


client.on('ready', () => {
    console.log('Bot Is Ready Now !');
    client.user.setGame(`By:iixlin`,"http://twitch.tv/xkilleryt")
    });




client.on('message', message => {
        var prefix = "-";
        if (message.author.bot) return;
        if (!message.content.startsWith(prefix)) return;
      
        let command = message.content.split(" ")[0];
        command = command.slice(prefix.length);
      
      
      let args = message.content.split(" ").slice(1);
      let x = args.join(" ")
        if(message.content.startsWith(prefix + 'say')) {
            message.channel.send(''+x);
                message.delete(01000)
        }
        
       
      });




client.on('message',async message => {
  if(message.content.startsWith("-setvoice")) {
  if(!message.guild.member(message.author).hasPermissions('MANAGE_CHANNELS')) return message.reply('âŒ **Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§ÙÙŠØ©**');
  if(!message.guild.member(client.user).hasPermissions(['MANAGE_CHANNELS','MANAGE_ROLES_OR_PERMISSIONS'])) return message.reply('âŒ **Ù„ÙŠØ³ Ù…Ø¹ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§ÙÙŠØ©**');
  message.channel.send('âœ…| **ØªÙ… Ø¹Ù…Ù„ Ø§Ù„Ø±ÙˆÙ… Ø¨Ù†Ø¬Ø§Ø­**');
  message.guild.createChannel(`Voice Online : [ ${message.guild.members.filter(m => m.voiceChannel).size} ]` , 'voice').then(c => {
    console.log(`Voice online channel setup for guild: \n ${message.guild.name}`);
    c.overwritePermissions(message.guild.id, {
      CONNECT: false,
      SPEAK: false
    });
    setInterval(() => {
      c.setName(`Voice Online : [ ${message.guild.members.filter(m => m.voiceChannel).size} ]`)
    },1000);
  });
  }
});




client.on('message', message => {
    if (message.content === "-server") {
    let embed = new Discord.RichEmbed()
   .setColor("RANDOM")
   .setThumbnail(message.author.avatarURL)
   .setTitle(`info about ${message.guild.name}`)
   .addField("Server Owner ðŸ‘‘",`âž¥ ` + `${message.guild.owner.user.username}`, true)
   .addField('Server ID ðŸ†”',`âž¥` + message.guild.id, true)
   .addField("Owner Tag",`âž¥ ` +  `#` + message.guild.owner.user.discriminator, true)
   .addField("Owner ID ðŸ†”",`âž¥ ` + message.guild.owner.user.id, true)
   .addField("Server RegionðŸ“¡",`âž¥ ` + message.guild.region, true)
   .addField("Server Member SizeðŸ§",`âž¥ ` + message.guild.members.size, true)
   .addField("Server Channels NumberðŸ§",`âž¥ ` + message.guild.channels.size, true)
   .addField("Server Roels NumberðŸ§",`âž¥ ` + message.guild.roles.size, true)
   .addField("AFK channelðŸ’¤",`âž¥ ` + message.guild.afkChannel || 'Null', true)
   .addField("Server Created AT",`âž¥ ` + message.guild.createdAt, true)
   .addField(`info about ${message.author.username}`, `âž¥ `)
   .addField("Name",`âž¥ ` + `${message.author.username}`, true)
   .addField('Tag',`âž¥ ` + "#" +  message.author.discriminator, true)
   .addField("ID ðŸ†”",`âž¥ ` + message.author.id, true)
   .addField(" Account Created At",`âž¥ ` + message.author.createdAt, true)
   .setTimestamp()
   .setFooter(message.author.tag, message.author.avatarURL)
      
      
   message.channel.sendEmbed(embed);
     }
 });




client.on('message', message => {
    if (message.content.startsWith("-avatar")) {  
        if (message.author.bot) return
        var mentionned = message.mentions.users.first();
    var omar;
      if(mentionned){
          var omar = mentionned;
      } else {
          var omar = message.author;
          
      }
        const embed = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor('Avatar Link :')
        .setTitle('Click Here')
        .setURL(`${omar.avatarURL}`)
        .setImage(`${omar.avatarURL}`)
        .setFooter('Epic Clan ',client.user.avatarURL) 
      message.channel.sendEmbed(embed);
    }
});





client.on("message", message => {
    const prefix = "-"
              
          if(!message.channel.guild) return;
   if(message.author.bot) return;
      if(message.content === prefix + "seravatar"){ 
          const embed = new Discord.RichEmbed()
  
      .setTitle(`This is  ** ${message.guild.name} **  Photo !`)
  .setAuthor(message.author.username, message.guild.iconrURL)
    .setColor(0x164fe3)
    .setImage(message.guild.iconURL)
    .setURL(message.guild.iconrURL)
                    .setTimestamp()

   message.channel.send({embed});
      }
  });



client.on('message', async message => {
   const prefix = "-"
  let args = message.content.split(" ");
  if(message.content.startsWith(prefix + "mute")) {
    if(!message.member.hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Øª Ù„Ø§ ØªÙ…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù„Ø§Ø²Ù…Ø© . ÙŠØ¬Ø¨ ØªÙˆÙØ± Ø®Ø§ØµÙŠØ© `Manage Roles`**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(!message.guild.member(client.user).hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Ø§ Ù„Ø§ Ø§Ù…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ÙƒØ§ÙÙŠØ© . ÙŠÙ„Ø²Ù… Ø®ØµØ§Ø¦Øµ `Manage Roles` Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø±**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    let mention = message.mentions.members.first();
    if(!mention) return message.reply('**Ù…Ù†Ø´Ù† Ø¹Ø¶Ùˆ Ù„Ø£Ø³ÙƒØ§ØªÙ‡ ( Ù„Ø£Ø¹Ø·Ø§Ø¦Ø© Ù…ÙŠÙˆØª ) ÙƒØªØ§Ø¨ÙŠ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(mention.highestRole.position >= message.guild.member(message.author).highestRole.positon) return message.reply('**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø¹Ø·Ø§Ø¡ Ù„Ù…ÙŠÙˆØª Ø´Ø®Øµ Ø±ØªØ¨ØªÙ‡ Ø§Ø¹Ù„Ù‰ Ù…Ù†Ùƒ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });
    if(mention.highestRole.positon >= message.guild.member(client.user).highestRole.positon) return message.reply('**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª Ù„Ø´Ø®Øµ Ø±ØªØ¨ØªÙ‡ Ø§Ø¹Ù„Ù‰ Ù…Ù†ÙŠ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });
    if(mention.id === message.author.id) return message.reply('**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª  Ù„Ù†ÙØ³Ùƒ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    let duration = args[2];
    if(!duration) return message.reply('**Ø­Ø¯Ø¯ ÙˆÙ‚Øª Ø²Ù…Ù†ÙŠ Ù„ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¹Ù† Ø§Ù„Ø´Ø®Øµ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(isNaN(duration)) return message.reply('**Ø­Ø¯Ø¯ ÙˆÙ‚Øª Ø²Ù…Ù†ÙŠ ØµØ­ÙŠØ­**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    let reason = message.content.split(" ").slice(3).join(" ");
    if(!reason) reason = "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";

    let thisEmbed = new Discord.RichEmbed()
    .setAuthor(mention.user.username, mention.user.avatarURL)
    .setTitle('ØªÙ… Ø§ØºØ·Ø§Ø¦Ùƒ Ù…ÙŠÙˆØª Ø¨Ø³ÙŠØ±ÙØ±')
    .setThumbnail(mention.user.avatarURL)
    .addField('# - Ø§Ù„Ø³ÙŠØ±ÙØ±',message.guild.name,true)
    .addField('# - ØªÙ… Ø§Ø¹Ø·Ø§Ø¦Ùƒ Ù…ÙŠÙˆØª Ø¨ÙˆØ§Ø³Ø·Ø©',message.author,true)
    .addField('# - Ø§Ù„Ø³Ø¨Ø¨',reason)

    let role = message.guild.roles.find('name', 'Muted') || message.guild.roles.get(r => r.name === 'Muted');
    if(!role) try {
      message.guild.createRole({
        name: "Muted",
        permissions: 0
      }).then(r => {
        message.guild.channels.forEach(c => {
          c.overwritePermissions(r , {
            SEND_MESSAGES: false,
            READ_MESSAGES_HISTORY: false,
            ADD_REACTIONS: false
          });
        });
      });
    } catch(e) {
      console.log(e.stack);
    }
    mention.addRole(role).then(() => {  // Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙØ§ ÙƒÙˆÙ…ÙŠÙ†ØªÙŠ
      mention.send(thisEmbed);
      message.channel.send(`**:white_check_mark: ${mention.user.username} muted in the server ! :zipper_mouth:  **  `);
      mention.setMute(true);
    });
    setTimeout(() => {
      if(duration === 0) return;
      mention.setMute(false);
      mention.removeRole(role);
      message.channel.send(`**:white_check_mark: ${mention.user.username} unmuted in the server ! :neutral_face:  **  `); // Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙØ§ ÙƒÙˆÙ…ÙŠÙ†ØªÙŠ
    },duration * 60000);
  } else if(message.content.startsWith(prefix + "unmute")) {
    let mention = message.mentions.members.first();
    let role = message.guild.roles.find('name', 'Muted') || message.guild.roles.get(r => r.name === 'Muted');
    if(!message.member.hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Øª Ù„Ø§ ØªÙ…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù„Ø§Ø²Ù…Ø© . ÙŠØ¬Ø¨ ØªÙˆÙØ± Ø®Ø§ØµÙŠØ© `Manage Roles`**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(!message.guild.member(client.user).hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Ø§ Ù„Ø§ Ø§Ù…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ÙƒØ§ÙÙŠØ© . ÙŠÙ„Ø²Ù… Ø®ØµØ§Ø¦Øµ `Manage Roles` Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø±**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(!mention) return message.reply('**Ù…Ù†Ø´Ù† Ø§Ù„Ø´Ø®Øµ Ù„ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¹Ù†Ù‡**').then(msg => { // Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙØ§ ÙƒÙˆÙ…ÙŠÙ†ØªÙŠ
      msg.delete(3500);
      message.delete(3500);
    });

      mention.removeRole(role);
      mention.setMute(false);
      message.channel.send(`**:white_check_mark: ${mention.user.username} unmuted in the server ! :neutral_face:  **  `); // Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙØ§ ÙƒÙˆÙ…ÙŠÙ†ØªÙŠ
  }
});




client.on('message', message => {
    if (message.content.startsWith("-bot")) {
    message.channel.send({
        embed: new Discord.RichEmbed()
            .setAuthor(client.user.username,client.user.avatarURL)
            .setThumbnail(client.user.avatarURL)
            .setColor('RANDOM')
            .setTitle('``INFO Broadcast Bot`` ')
            .addField('``My Ping``' , [`${Date.now() - message.createdTimestamp}` + 'MS'], true)
            .addField('``RAM Usage``', `[${(process.memoryUsage().rss / 1048576).toFixed()}MB]`, true)
            .addField('``servers``', [client.guilds.size], true)
            .addField('``channels``' , `[ ${client.channels.size} ]` , true)
            .addField('``Users``' ,`[ ${client.users.size} ]` , true)
            .addField('``My Name``' , `[ ${client.user.tag} ]` , true)
            .addField('``My ID``' , `[ ${client.user.id} ]` , true)
                  .addField('``My Prefix``' , `[-]` , true)
                  .addField('``My Language``' , `[ Java Script ]` , true)
                    })
}
});



 var prefix = "-"
    client.on('message', message => {
      if (message.author.x5bz) return;
      if (!message.content.startsWith(prefix)) return;
     
      let command = message.content.split(" ")[0];
      command = command.slice(prefix.length);
     
      let args = message.content.split(" ").slice(1);
     
      if (command == "ban") {
                   if(!message.channel.guild) return message.reply('** This command only for servers**');
             
      if(!message.guild.member(message.author).hasPermission("BAN_MEMBERS")) return message.reply("**You Don't Have ` BAN_MEMBERS ` Permission**");
      if(!message.guild.member(client.user).hasPermission("BAN_MEMBERS")) return message.reply("**I Don't Have ` BAN_MEMBERS ` Permission**");
      let user = message.mentions.users.first();
      let reason = message.content.split(" ").slice(2).join(" ");
      /*let b5bzlog = client.channels.find("name", "5bz-log");
     
      if(!b5bzlog) return message.reply("I've detected that this server doesn't have a 5bz-log text channel.");*/
      if (message.mentions.users.size < 1) return message.reply("**Ù…Ù†Ø´Ù† Ø´Ø®Øµ**");
      if(!reason) return message.reply ("**Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø·Ø±Ø¯**");
      if (!message.guild.member(user)
      .bannable) return message.reply("**Ù„Ø§ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø·Ø±Ø¯ Ø´Ø®Øµ Ø§Ø¹Ù„Ù‰ Ù…Ù† Ø±ØªØ¨ØªÙŠ ÙŠØ±Ø¬Ù‡ Ø§Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª Ø±ØªØ¨Ù‡ Ø¹Ø§Ù„ÙŠ**");
     
      message.guild.member(user).ban(7, user);
     
      const banembed = new Discord.RichEmbed()
      .setAuthor(`BANNED!`, user.displayAvatarURL)
      .setColor("RANDOM")
      .setTimestamp()
      .addField("**User:**",  '**[ ' + `${user.tag}` + ' ]**')
      .addField("**By:**", '**[ ' + `${message.author.tag}` + ' ]**')
      .addField("**Reason:**", '**[ ' + `${reason}` + ' ]**')
      message.channel.send({
        embed : banembed
      })
    }
    });



client.on('message', message => {
  var prefix = "-"
var args = message.content.split(" ").slice(1);    
if(message.content.startsWith(prefix + 'id')) {
var year = message.author.createdAt.getFullYear()
var month = message.author.createdAt.getMonth()
var day = message.author.createdAt.getDate()
var men = message.mentions.users.first();  
let args = message.content.split(' ').slice(1).join(' ');
if (args == '') {
var z = message.author;
}else {
var z = message.mentions.users.first();
}
 
let d = z.createdAt;          
let n = d.toLocaleString();   
let x;                       
let y;                        
 
if (z.presence.game !== null) {
y = `${z.presence.game.name}`;
} else {
y = "No Playing... |ðŸ’¤.";
}
if (z.bot) {
var w = 'Ø¨ÙˆØª';
}else {
var w = 'Ø¹Ø¶Ùˆ';
}
let embed = new Discord.RichEmbed()
.setColor("#502faf")
.addField('ðŸ”±| Ø§Ø³Ù…Ùƒ:',`**<@` + `${z.id}` + `>**`, true)
.addField('ðŸ›¡| Ø§ÙŠØ¯ÙŠ:', "**"+ `${z.id}` +"**",true)
.addField('â™¨| Playing:','**'+y+'**' , true)
.addField('ðŸ¤–| Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨Ùƒ:',"**"+ w + "**",true)    
.addField('ðŸ“›| Ø§Ù„ÙƒÙˆØ¯ Ø­Ù‚ Ø­Ø³Ø§Ø¨Ùƒ:',"**#" +  `${z.discriminator}**`,true)
.addField('**Ø§Ù„ØªØ§Ø±ÙŠØ­ Ø§Ù„Ø°ÙŠ Ø§Ù†Ø´Ø¦ ÙÙŠÙ‡ Ø­Ø³Ø§Ø¨Ùƒ | ðŸ“† **: ' ,year + "-"+ month +"-"+ day)    
.addField("**ØªØ§Ø±ÙŠØ® Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø³ÙŠØ±ÙØ±| âŒš   :**", message.member.joinedAt.toLocaleString())    
 
.addField('**âŒš | ØªØ§Ø±ÙŠØ® Ø§Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„:**', message.author.createdAt.toLocaleString())
.addField("**Ø§Ø®Ø± Ø±Ø³Ø§Ù„Ø© Ù„Ùƒ | ðŸ’¬  :**", message.author.lastMessage)            
 
.setThumbnail(`${z.avatarURL}`)
.setFooter(message.author.username, message.author.avatarURL)
 
message.channel.send({embed});
  if (!message) return message.reply('**Ø¶Ø¹ Ø§Ù„Ù…ÙŠÙ†Ø´Ø§Ù† Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­  âŒ **').catch(console.error);
 
}
 
});




client.on("ready", () => {
  function lol() {
    client.guilds.get('395147213065682956').roles.find("name", "Rainbow").setColor("RANDOM");
  };
  setInterval(lol, 1600);
});



















































client.login(process.env.BOT_TOKEN);
